<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Websocket test</title>
    <script type="text/javascript">
        function shoop(x, y){
            alert(x+y);
        }
        var ws = new WebSocket("ws://127.0.0.1:8080");
        ws.onopen = function() {
            ws.send("connection made");
            alert("connection made");
        };
        ws.onmessage = function (evt) {
            //alert(evt.data);
            data = eval("("+evt.data+")");
            var fn = data[0];
            var params = data.slice(1);
            var code = fn + "(" + params.join(", ") + ");"
            eval(code);
        };
        ws.onclose = function() {
            alert("connection lost");
        };
    </script>
  </head>
  <body>
    <input type="text" id="data" />
    <button onclick='ws.send(document.getElementById("data").value)'>send</button>
    <br/>
    <canvas id="screen" width="640" height="480"></canvas>
  </body>
</html>
